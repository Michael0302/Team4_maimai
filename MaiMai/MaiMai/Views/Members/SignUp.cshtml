
@{
    ViewBag.Title = "SignUp";
    Layout = "~/Views/Shared/_LayoutPage1.cshtml";
}


<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css"
          integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
    <link href="~/Content/cssCHIEN/SignUP.css" rel="stylesheet" />

</head>

<body class="w-100">

    <div class="cf flex-l bg-near-white">
        <div class="w-50-l pv6-l pv5-ns pv4 ph5-ns ph4 tr-l self-center tc tl-l">
            <a class="nowrap" href="/">
                <h1 class="mv0 f5 dib mr4 br b--light-silver">
                    <img src="~/Content/ImageCHIEN/maimaiLOGO.svg" />

                </h1>
                <h2 class="mv0 f5 dib">一起幫助需要幫助的人</h2>
            </a>
        </div>
        <div class="w-50-l ph5-ns ph4 pv6-l pt3-ns pv4 bg-white-l">
            <div class="nt3 mt0-ns mb4"></div>
            <h3 class="b f4"> </h3>
            <div class="fb-login-button" data-max-rows="1" data-size="medium" data-button-type="login_with" data-show-faces="false" data-auto-logout-link="true" data-use-continue-as="false" data-scope="public_profile,email" data-onlogin="checkLoginState();"></div>
            或註冊
            <div class="js-details reset-details mb3 f6">
                <div class="mt3">
                    <div>
                        <form>
                            <div>
                                <label class="b" for="userAccount">用戶帳號</label>
                                <input class="w-100" required="required" autofocus="autofocus" type="text" name="userAccount" id="userAccount">
                                <label class="b" for="userPassWord">密碼</label>
                                <input class="w-100" required="required" autofocus="autofocus" type="password" name="userPassWord" id="userPassWord">
                                <label class="b" for="userPassWordCheck">確認密碼</label>
                                <input class="w-100" required="required" autofocus="autofocus" type="password" name="userPassWordCheck" id="userPassWordCheck">
                                <label class="b" for="city">城市</label>
                                <input class="w-100" required="required" type="text" name="city" id="city">
                                <label class="b" for="address"> 地址</label>
                                <input class="w-100" required="required" type="text" name="address" id="address">
                                @*<label class="b" for="user_password_confirmation">確認密碼</label>
                                    <input class="w-100" required="required" minlength="6" type="password" name="user[password_confirmation]" id="user_password_confirmation">*@
                                <label class="b" for="phoneNumber">手機號碼</label>
                                <input class="w-100" required="required" autofocus="autofocus" type="text" name="phoneNumber" id="phoneNumber">
                                <label class="b" for="firstName">名字</label>
                                <input class="w-100" required="required" autofocus="autofocus" type="text" name="firstName" id="firstName">
                                <label class="b" for="lastName">姓氏</label>
                                <input class="w-100" required="required" autofocus="autofocus" type="text" name="lastName" id="lastName">
                                <label class="b" for="birthday">生日</label>
                                <input class="w-100" required="required" autofocus="autofocus" type="date" name="birthday" id="birthday">
                                <label class="b" for="identityNumber">身分證字號</label>
                                <input class="w-100" required="required" autofocus="autofocus" type="text" name="identityNumber" id="identityNumber">
                                <label class="b" for="profileImg">個人頭像</label>
                                <input class="w-100" required="required" autofocus="autofocus" type="file" name="profileImg" id="profileImg">
                                <label class="b" for="selfDescription">個人簡介</label>
                                <textarea class="w-100" required="required" autofocus="autofocus" type="text" name="selfDescription" id="selfDescription"> </textarea>
                                <label class="b" for="email">信箱</label>
                                <input class="w-100" required="required" autofocus="autofocus" type="email" name="email" id="email">
                            </div>
                            <div class="mt3">
                                <button type="submit" id="p1" class="button b green" onclick="myFunction()">註冊</button>

                                


                                @*<button type="button" class="register-submit"onclick="myFunction()" >送出</button>
        <button type="submit" class="register-submit2 hide">.323</button>*@
                            </div>
                        </form>
                    </div>
                    <label class="f6">
                        <input name="user[remember_me]" type="hidden" value="0"><input type="checkbox" value="1" checked="checked" name="user[remember_me]" id="user_remember_me">
                        記得我的帳號，下次自動登入
                    </label>
                </div>
                <p class="f7 gray">
                    繼續進行代表你同意
                    <a href="/docs/terms_of_service">服務條款</a>。
                </p>
                目前狀態：
                <span id="FB_STATUS_1"></span>
            </div>
            <button id="demo1" onclick="demo1()">DEMO1</button>
            <div class="mv4-ns mv3 bt b--light-gray"></div>
            <a class="link b f6 hover-blue black mr3" href="/Members/Login">登入</a>
            @*@Html.ActionLink("登入", "Login", "Members")*@
            <a class="link b f6 hover-blue black mr3" href="/users/password/new">忘記密碼或重設密碼</a>
            <div class="fb-like"
                 data-share="true"
                 data-width="450"
                 data-show-faces="true">
            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>
    <div id="fb-root"></div>
    <script async defer crossorigin="anonymous" src="https://connect.facebook.net/zh_TW/sdk.js#xfbml=1&version=v10.0&appId=760951437892454&autoLogAppEvents=1" nonce="uw6hH87Q"></script>
    <script async defer crossorigin="anonymous" src="https://connect.facebook.net/en_US/sdk.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@9"></script>
    <!-- 若需相容 IE11，要加載 Promise Polyfill-->
    <script src="https://cdn.jsdelivr.net/npm/promise-polyfill"></script>




    <script>

        function alertTest() {
            Swal.fire(
                "註冊失敗", //標題 
                " 請檢查您所輸入的欄位是否有誤!", //訊息內容(可省略)
                "error" //圖示(可省略) success/info/warning/error/question
               
            );
        }


        function alertTest1() {
            Swal.fire(
                "註冊成功", //標題 
                " 歡迎光臨MaiMai</br>2秒後自動跳轉回首頁", //訊息內容(可省略)
                "success" //圖示(可省略) success/info/warning/error/question

            );
        }

        function home() {
            window.location.href = "/NewMaimaiIndex/MaimaiIndexNew";
        }



        //function checkinput() {
        //    // 檢查登入帳號是否有特殊字元
        //    var re = /[^a-zA-Z0-9.-_]/;
        //    var okname = re.exec(document.getElementById("userAccount").value);
        //    if (okname) {
        //        window.alert("指允許英文、數字、底線、小數點與減號");
        //        document.getElementById("userAccount").focus();
        //        return false;
        //    }

        //    // 開始檢查密碼長度是否正確？
        //    var pw1 = document.getElementById("userPassWord");
        //    if (pw1.value.length < 5) {
        //        window.alert("密碼長度必須要大於 5 個字元以上");
        //        document.getElementById("userPassWord").focus();
        //        return false;
        //    }

        //    // 看看兩次密碼是否相同？
        //    var pw2 = document.getElementById("userPassWordCheck");
        //    if (pw1.value != pw2.value) {
        //        window.alert("兩次密碼並不相同！");
        //        document.getElementById("userPassWordCheck").focus();
        //        return false;
        //    }

        //    // 檢查生日的格式正確與否
        //    re = /^[0-9]{4}[./-][0-9]{2}[./-][0-9]{2}$/;
        //    var okday = re.exec(document.getElementById("birthday").value);
        //    if (!okday) {
        //        window.alert("日期格式為 2011-11-11");
        //        document.getElementById("birthday").focus();
        //        return false;
        //    }
        //}

        function myFunction() {
            $(document).ready(function () {

                var userAccount2 = $("#userAccount").val();
                var userPassWord2 = $("#userPassWord").val();
                var city2 = $("#city").val();
                var address2 = $("#address").val();
                var phoneNumber2 = $("#phoneNumber").val();
                var firstName2 = $("#firstName").val();
                var lastName2 = $("#lastName").val();
                var birthday2 = $("#birthday").val();
                var identityNumber2 = $("#identityNumber").val();
                var profileImg2 = $("#profileImg").val();
                var selfDescription2 = $("#selfDescription").val();
                var email2 = $("#email").val();


                $.ajax({
                    type: "POST",
                    url: " /Members/SignUpMethod",
                    data: {
                        userAccount: userAccount2,
                        userPassWord: userPassWord2,
                        city: city2,
                        address: address2,
                        phoneNumber: phoneNumber2,
                        firstName: firstName2,
                        lastName: lastName2,
                        birthday: birthday2,
                        identityNumber: identityNumber2,
                        profileImg: profileImg2,
                        selfDescription: selfDescription2,
                        email: email2
                    },
                    success: function (data) {
                        var good = data.indexOf("註冊成功")
                        console.log(good)
                        if (good == 0) {
                            alertTest1()
                            setTimeout("home()",2000)
                            
                        }
                        else {
                            //alert("註冊失敗,請檢查輸入欄位")
                            alertTest()
                        }
                    }
                });
            });
        }


        //function doUpload(eler) {
        //    var photo = $(eler).val();
        //    console.log(photo);
        //    $.ajax({
        //        url: "/RequiredPost/uploadPhoto",
        //        type: "Post",
        //        data: { upphoto: photo },
        //        processData: false,
        //        contentType: false,
        //        success: function (response) {
        //            $(".displayImg>img").attr("src", response)
        //        }
        //    })
        //} //  doUpload end




    </script>

    <script>
        window.fbAsyncInit = function () {
            FB.init({
                appId: '760951437892454',
                cookie: true,
                xfbml: true,
                version: ' v10.0'
            });

            FB.AppEvents.logPageView();

        };
        FB.getLoginStatus(function (response) {
            statusChangeCallback(response);
        });

        function statusChangeCallback(response) {
            console.log(response);
            var target = document.getElementById("FB_STATUS_1"),
                html = "";

            // 登入 FB 且已加入會員
            if (response.status === 'connected') {
                html = "已登入 FB，並加入 MaiMai  <br/>";

                FB.api('/me?fields=id,name,email', function (response) {
                    console.log(response);
                    html += "會員暱稱：" + response.name + "<br/>";
                    html += "會員 email：" + response.email;
                    target.innerHTML = html;
                });
            }

            // 登入 FB, 未偵測到加入會員
            else if (response.status === "not_authorized") {
                target.innerHTML = "已登入 FB，但未加入MaiMai  ";
            }

            // 未登入 FB
            else {
                target.innerHTML = "未登入 FB";
            }
        }

        function checkLoginState() {
            FB.getLoginStatus(function (response) {
                statusChangeCallback(response);
            });
        }

        (function (d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) { return; }
            js = d.createElement(s); js.id = id;
            js.src = "https://connect.facebook.net/en_US/sdk.js";
            fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));





        //{
        //    status: 'connected',
        //        authResponse: {
        //        accessToken: '...',
        //            expiresIn: '...',
        //                signedRequest: '...',
        //                    userID: '...'
        //    }
        //}


        //<fb: login-button
        //    scope="public_profile,email" autologoutlink="true"
        //    onlogin="checkLoginState();">
        //</fb: login - button >

        function demo1() {
            $("#userAccount").val("Kobe")
            $("#userPassWord").val("apple0108")
            $("#userPassWordCheck").val("apple0108")
            $("#city").val("台中市")
            $("#address").val("台中市大雅區中港路一段88號")
            $("#phoneNumber").val("0988554474")
            $("#firstName").val("國瑜")
            $("#lastName").val("韓")
            $("#birthday").val("1945-01-08")
            $("#identityNumber").val("F447878547")
            //$("#profileImg").val("")
            $("#selfDescription").val("台灣土豪,韓國瑜,販售各種國瑜寶寶")
            $("#email").val("quees778w2s@gmail.com")
        }

        $(function () {
            $('.register-submit').on('click', function () {
                $.ajax({
                    url: " ",
                    type: 'POST',
                    dataType: 'HTML',
                    data: {
                        account: $('#inputAccount').val()
                    },
                    success: function (res) {
                        if (res == '1') {
                            alert('申請帳號重複，請輸入其他帳號');
                        } else {
                            $('.register-submit2').click();
                        }
                    }
                });
            });
        });

















    </script>


</body>

</html>
